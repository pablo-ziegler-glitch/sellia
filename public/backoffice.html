<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sellia Backoffice</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <main class="bo-shell">
    <header>
      <h1>Backoffice</h1>
      <p>Módulos iniciales: Configuración, Usuarios, Mantenimiento, Reportes.</p>
      <small>Ventas / Carrito fuera de alcance inicial.</small>
    </header>

    <nav class="bo-modules" aria-label="Dominios funcionales">
      <button class="bo-module">Configuración</button>
      <button class="bo-module">Usuarios</button>
      <button class="bo-module bo-module--active">Mantenimiento</button>
      <button class="bo-module">Reportes</button>
    </nav>

    <section>
      <h2>Mantenimiento operativo</h2>
      <div class="bo-filters">
        <button data-filter="pending" class="bo-filter bo-filter--active">Pendientes</button>
        <button data-filter="overdue" class="bo-filter">Vencidas</button>
        <button data-filter="blocker" class="bo-filter">Bloqueantes operativas</button>
      </div>
      <div class="bo-maintenance-actions">
        <button id="maintenance-create-btn" class="bo-filter">Crear tarea</button>
        <button id="maintenance-retry-btn" class="bo-filter">Reintentar carga</button>
      </div>
      <p id="maintenance-status" class="bo-maintenance-status" role="status" aria-live="polite"></p>
      <ul id="maintenance-list" class="bo-list"></ul>
      <button id="maintenance-load-more-btn" class="bo-filter bo-load-more" hidden>Cargar más tareas</button>
    </section>


    <section>
      <h2>Pagos pendientes</h2>
      <p>Consultá manualmente al provider para confirmar estado y recibir recomendación de acción.</p>
      <div class="bo-payments-toolbar">
        <button id="payments-retry-btn" class="bo-filter">Reintentar carga</button>
      </div>
      <p id="payments-status" class="bo-maintenance-status" role="status" aria-live="polite"></p>
      <ul id="pending-payments-list" class="bo-list"></ul>
    </section>

    <section>
      <h2>Backups y restore</h2>
      <p>El restore nunca se ejecuta directo: primero se crea solicitud y se valida aprobación requerida.</p>
      <div class="bo-restore-guard">
        <label>
          <input id="restore-confirm-check" type="checkbox" />
          Confirmo que revisé alcance, runId y diff estimado.
        </label>
        <button id="restore-request-btn" class="bo-filter" disabled>Solicitar restore</button>
      </div>
      <ul id="restore-history-list" class="bo-list"></ul>
    </section>
  </main>

  <script src="https://unpkg.com/dompurify@3.1.6/dist/purify.min.js" defer></script>
  <script src="/safe-dom.js" defer></script>
  <script src="/config.js" defer></script>
  <script type="module" src="/backoffice.js"></script>
</body>
</html>
